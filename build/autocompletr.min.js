!function(t,e,i){"use strict";var n=function(i,n){var s=this,l=n||{};s.target=i,s.visible=!1,s.options={removeFirstOptionFromSearch:l.removeFirstOptionFromSearch||!0,useFirstOptionTextAsPlaceholder:l.useFirstOptionTextAsPlaceholder||!0,placeholderText:l.placeholderText||null,noResultsMessage:l.noResultsMessage||"No results found.",fitList:l.fitList||!1,onload:l.onload||function(){},onchange:l.onchange||function(){}};var o={dropdownList:"Autocompletr-list",textInput:"Autocompletr-textInput",listItem:"Autocompletr-listItem",textInputWithList:"Autocompletr-textInput--expanded",hidden:"Autocompletr-hidden",visible:"Autocompletr-visible",activeItem:"Autocompletr-activeItem",noResults:"Autocompletr-noResults",match:"Autocompletr-match"},r={up:"up",down:"down"},a={ENTER:13,ESC:27,UP:38,DOWN:40},u={OPTION_MISSING:"Missing option elements.",SELECT_MISSING:"Missing select element."},c={addEventListener:function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,i)},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},hasClass:function(t,e){var i;return i=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},removeClass:function(t,e){if(t.classList)t.classList.remove(e);else{var i=new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(i," ")}},getTextNode:function(t){return t&&(t.innerText||t.textContent||t.innerHTML)},escapeString:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},throttle:function(t,e){var i,n,s,l=null,o=0,r=function(){o=(new Date).getTime(),l=null,s=t.apply(i,n),i=null,n=null};return function(){var a=(new Date).getTime(),u=e-(a-o);return i=this,n=arguments,0>=u?(clearTimeout(l),l=null,o=a,s=t.apply(i,n),i=n=null):l||(l=setTimeout(r,u)),s}}},p=function(t,e){t=c.escapeString(t);var i=new RegExp("(<li[^>]*>[^<]*)("+t+")([^<]*</li>)","gi"),n='$1<em class="'+o.match+'">$2</em>$3';return e.replace(i,n)},d=function(){var t,i=e.createElement("input");if(i.style.width=s.width+"px",i.setAttribute("class",o.textInput),i.setAttribute("type","text"),i.setAttribute("autocapitalize","off"),i.setAttribute("autocomplete","false"),i.setAttribute("autocorrect","off"),i.setAttribute("spellcheck","false"),i.setAttribute("tabindex",s.target.tabIndex),s.target.setAttribute("tabindex","-1"),s.options.placeholderText)i.setAttribute("placeholder",s.options.placeholderText);else if(s.options.useFirstOptionTextAsPlaceholder)try{t=c.getTextNode(s.target.options[0]),i.setAttribute("placeholder",t)}catch(n){console.error(u.OPTION_MISSING)}return s.target.insertAdjacentHTML("afterend",i.outerHTML),s.target.nextElementSibling},v=function(){var t=s.target.querySelector("[selected]");t&&s.selectItem(t,!0)},m=function(t,e){for(var i in e)t=t.replace(new RegExp("{"+i+"}","g"),e[i]);return t},f=function(){var t,e="",i='<li class="'+o.listItem+'" data-value="{value}" data-label="{label}">{item}</li>';if(s.options.removeFirstOptionFromSearch)try{s.target.removeChild(s.target.options[0])}catch(n){console.error(u.OPTION_MISSING)}return t=s.target.querySelectorAll("option"),[].slice.call(t).forEach(function(t){var n=t.getAttribute("value")||"",s=c.getTextNode(t),l=t.getAttribute("data-value")||s||"";e+=m(i,{value:n,label:l,item:s})}),e},g=function(t,e){var i="",n=t.getAttribute("data-label"),s=t.getAttribute("data-value");return i=null!=n&&""!==n?t.getAttribute("data-label"):e===!0&&null!=s&&""!==s?s:c.getTextNode(t)},h=function(){var t=e.createElement("ul");return t.setAttribute("class",o.dropdownList),s.textInput.insertAdjacentHTML("afterend",t.outerHTML),s.textInput.nextElementSibling},I=function(t){s.list.innerHTML=t,s.currentItemsDOM=s.list.childNodes},x=function(){var t='<li class="0">1</li>',e=t.replace("0",o.noResults).replace("1",s.options.noResultsMessage);I(e)},L=function(t){var e,i,n;e=s.currentItemsDOM,e.length<=1||(i=s.getActiveListItem(),t===a.UP?i.previousElementSibling&&(n=i.previousElementSibling):i.nextElementSibling&&(n=i.nextElementSibling),n&&(c.removeClass(i,o.activeItem),c.addClass(n,o.activeItem),s.scrollListItemIntoView(n)))},b=function(e){e=e||t.event;var i,n=e.keyCode||e.which,l=!1;for(var r in a)if(n===a[r]){l=!0;break}return l?n===a.ENTER?void(s.visible?(i=s.getActiveListItem(),i&&!c.hasClass(i,o.noResults)&&s.selectItem(i)):s.open()):n===a.ESC?void s.hideList():void 0:(s.list.scrollTop=0,void s.open(this.value))},A=function(e){e=e||t.event;var i=e.keyCode||e.which;(i===a.UP||i===a.DOWN)&&s.currentItemsDOM&&(s.visible||s.open(),L(i)),i===a.ENTER&&e.preventDefault()},T=function(t){s.open()},E=function(t){!s.preventBlurTrigger&&s.getActiveListItem()&&s.selectItem(s.getActiveListItem())},C=function(e){var i,n;s.preventBlurTrigger=!0,t.setTimeout(function(){s.preventBlurTrigger=!1},1),i=e.target.className===o.match?e.target.parentNode:e.target,i!==s.list&&(n=s.getActiveListItem(),n&&!c.hasClass(n,o.noResults)&&s.selectItem(n))},S=function(t){var e=t.target;"LI"===e.tagName.toUpperCase()&&(s.toggleActiveItem(),c.hasClass(e,o.noResults)||c.addClass(e,o.activeItem))},N=function(t){s.repositionList()},w=function(){c.addEventListener(s.textInput,"keyup",b),c.addEventListener(s.textInput,"keydown",A),c.addEventListener(s.textInput,"focus",T),c.addEventListener(s.textInput,"blur",E),c.addEventListener(s.list,"mousedown",C),c.addEventListener(s.list,"mouseover",S),c.addEventListener(t,"resize",c.throttle(N,50))};s.init=function(){return i.getAttribute("data-autocompletr-instantiated")?void 0:("SELECT"!==i.tagName.toUpperCase()&&console.error(u.SELECT_MISSING),i.setAttribute("data-autocompletr-instantiated","true"),s.width=s.target.offsetWidth,c.addClass(s.target,o.hidden),s.textInput=d(),s.list=h(),s.itemsHTML=f(),I(s.itemsHTML),s.items=s.list.childNodes,w(),v(),s.options.onload.call(s),s)},s.open=function(t){var e,i=t;null==i&&(i=s.value||""),e=s.search(i),e.length<1&&(x(),s.currentItemsDOM=null),s.showList()},s.showList=function(){s.visible=!0,c.addClass(s.list,o.visible),s.repositionList(),c.addClass(s.textInput,o.textInputWithList),s.list.firstChild.className!==o.noResults&&c.addClass(s.list.firstChild,o.activeItem)},s.hideList=function(){s.visible=!1,c.removeClass(s.list,o.visible),c.removeClass(s.textInput,o.textInputWithList)},s.selectItem=function(t,e){var i,n,l=e||!1;i=g(t,l),s.textInput.value=i,s.hideList(),n=t.getAttribute("data-value")?t.getAttribute("data-value"):t.value,s.target.value=n,s.value=i,s.options.onchange.call(s);var o=new Event("change");s.target.dispatchEvent(o)},s.repositionList=function(){var i=s.textInput.offsetTop,n=s.textInput.getBoundingClientRect().top,l=s.textInput.offsetHeight,o=s.list.offsetHeight,a=Math.floor(s.textInput.offsetTop+l),u=t.innerHeight||e.documentElement.clientHeight,c=0,p="";n+l+o>u?(c=i-s.list.offsetHeight,p=r.up):(c=a,p=r.down),s.list.style.top=c+"px",s.list.style.left=s.textInput.offsetLeft+"px",s.list.setAttribute("data-orientation",p),s.options.fitList&&(s.list.style.width=s.textInput.offsetWidth+"px")},s.search=function(t){var e,i="";return""!==t?(t=c.escapeString(t),i=new RegExp("<li[^>]*>[^<]*"+t+"[^<]*</li>","gi")):i=/<li[^<]*<\/li>/gi,e=s.itemsHTML.match(i)||[],e.length&&(e=e.join(""),t&&(e=p(t,e)),I(e),c.addClass(s.list.firstChild,o.activeItem)),e},s.getActiveListItem=function(){return s.list.querySelector("."+o.activeItem)},s.toggleActiveItem=function(){var t=s.list.querySelector("."+o.activeItem);t&&c.removeClass(t,o.activeItem)},s.scrollListItemIntoView=function(t){var e,i,n=t.offsetTop,l=t.offsetHeight,o=s.list.offsetHeight,r=s.list.scrollTop;e=r>=n,i=n>=r+o-l,e?s.list.scrollTop=n:i&&(s.list.scrollTop=n-o+l)}};t.Autocompletr=n,function(){var i=e.querySelectorAll("[data-autocompletr]");[].forEach.call(i,function(e){new t.Autocompletr(e).init()})}()}(window,document);