!function(t,e,i){"use strict";var n=function(i,n){var s=this,l=n||{};s.target=i,s.visible=!1,s.options={removeFirstOptionFromSearch:l.removeFirstOptionFromSearch||!0,useFirstOptionTextAsPlaceholder:l.useFirstOptionTextAsPlaceholder||!0,placeholderText:l.placeholderText||null,noResultsMessage:l.noResultsMessage||"No results found.",fitList:l.fitList||!1,onload:l.onload||function(){},onchange:l.onchange||function(){}};var o={dropdownList:"Autocompletr-list",textInput:"Autocompletr-textInput",listItem:"Autocompletr-listItem",textInputWithList:"Autocompletr-textInput--expanded",hidden:"Autocompletr-hidden",visible:"Autocompletr-visible",activeItem:"Autocompletr-activeItem",noResults:"Autocompletr-noResults",match:"Autocompletr-match"},r={ENTER:13,ESC:27,UP:38,DOWN:40},a={OPTION_MISSING:"Missing option elements.",SELECT_MISSING:"Missing select element."},u={addEventListener:function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,i)},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},hasClass:function(t,e){var i;return i=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},removeClass:function(t,e){if(t.classList)t.classList.remove(e);else{var i=new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(i," ")}},getTextNode:function(t){return t&&(t.innerText||t.textContent||t.innerHTML)},escapeString:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},throttle:function(t,e){var i,n,s,l=null,o=0,r=function(){o=(new Date).getTime(),l=null,s=t.apply(i,n),i=null,n=null};return function(){var a=(new Date).getTime(),u=e-(a-o);return i=this,n=arguments,0>=u?(clearTimeout(l),l=null,o=a,s=t.apply(i,n),i=n=null):l||(l=setTimeout(r,u)),s}}},c=function(t,e){t=u.escapeString(t);var i=new RegExp("(<li[^>]*>[^<]*)("+t+")([^<]*</li>)","gi"),n='$1<em class="'+o.match+'">$2</em>$3';return e.replace(i,n)},p=function(){var t,i=e.createElement("input");if(i.style.width=s.width+"px",i.setAttribute("class",o.textInput),i.setAttribute("autocapitalize","off"),i.setAttribute("autocomplete","off"),i.setAttribute("autocorrect","off"),i.setAttribute("spellcheck","false"),i.setAttribute("tabindex",s.target.tabIndex),s.target.setAttribute("tabindex","-1"),s.options.placeholderText)i.setAttribute("placeholder",s.options.placeholderText);else if(s.options.useFirstOptionTextAsPlaceholder)try{t=u.getTextNode(s.target.options[0]),i.setAttribute("placeholder",t)}catch(n){console.error(a.OPTION_MISSING)}return s.target.insertAdjacentHTML("afterend",i.outerHTML),s.target.nextElementSibling},d=function(){var t=s.target.querySelector("[selected]");return t&&s.selectItem(t),t},v=function(){var t,e,i;if(s.options.removeFirstOptionFromSearch)try{s.target.removeChild(s.target.options[0])}catch(n){console.error(a.OPTION_MISSING)}return t=s.target.innerHTML.replace(/<!--([^\[|(<!)].*)/g,"").replace(/\s{2,}/g,"").replace(/(\r?\n)/g,""),e=/<option(?:[^>]*?value="([^"]*?)"|)[^>](?:[^>]*?data-value="([^"]*?)"|)[^>]*?>(.*?)<\/option>\n?/gi,i='<li class="'+o.listItem+'" data-value="$1" data-label="$2">$3</li>',t=t.replace(e,i)},m=function(t){var e="";return e=t.getAttribute("data-label")?t.getAttribute("data-label"):t.getAttribute("data-value")?t.getAttribute("data-value"):u.getTextNode(t)},f=function(){var t=e.createElement("ul");return t.setAttribute("class",o.dropdownList),s.textInput.insertAdjacentHTML("afterend",t.outerHTML),s.textInput.nextElementSibling},g=function(t){s.list.innerHTML=t,s.currentItemsDOM=s.list.childNodes},h=function(){var t='<li class="0">1</li>',e=t.replace("0",o.noResults).replace("1",s.options.noResultsMessage);g(e)},I=function(t){var e,i,n;e=s.currentItemsDOM,e.length<=1||(i=s.getActiveListItem(),t===r.UP?i.previousElementSibling&&(n=i.previousElementSibling):i.nextElementSibling&&(n=i.nextElementSibling),n&&(u.removeClass(i,o.activeItem),u.addClass(n,o.activeItem),s.scrollListItemIntoView(n)))},L=function(e){e=e||t.event;var i,n=e.keyCode||e.which,l=!1;for(var a in r)if(n===r[a]){l=!0;break}return l?n===r.ENTER?void(s.visible?(i=s.getActiveListItem(),i&&!u.hasClass(i,o.noResults)&&s.selectItem(i)):s.open()):n===r.ESC?void s.hideList():void 0:(s.list.scrollTop=0,void s.open(this.value))},x=function(e){e=e||t.event;var i=e.keyCode||e.which;(i===r.UP||i===r.DOWN)&&s.currentItemsDOM&&(s.visible||s.open(),I(i))},T=function(t){s.open()},b=function(t){!s.preventBlurTrigger&&s.getActiveListItem()&&s.selectItem(s.getActiveListItem())},A=function(e){var i,n;s.preventBlurTrigger=!0,t.setTimeout(function(){s.preventBlurTrigger=!1},1),i=e.target.className===o.match?e.target.parentNode:e.target,i!==s.list&&(n=s.getActiveListItem(),n&&!u.hasClass(n,o.noResults)&&s.selectItem(n))},E=function(t){var e=t.target;"LI"===e.tagName.toUpperCase()&&(s.toggleActiveItem(),u.addClass(e,o.activeItem))},S=function(t){s.repositionList()},C=function(){u.addEventListener(s.textInput,"keyup",L),u.addEventListener(s.textInput,"keydown",x),u.addEventListener(s.textInput,"focus",T),u.addEventListener(s.textInput,"blur",b),u.addEventListener(s.list,"mousedown",A),u.addEventListener(s.list,"mouseover",E),u.addEventListener(t,"resize",u.throttle(S,50))};s.init=function(){return i.getAttribute("data-autocompletr-instantiated")?void 0:("SELECT"!==i.tagName.toUpperCase()&&console.error(a.SELECT_MISSING),i.setAttribute("data-autocompletr-instantiated","true"),s.width=s.target.offsetWidth,u.addClass(s.target,o.hidden),s.textInput=p(),s.list=f(),s.itemsHTML=v(),g(s.itemsHTML),s.items=s.list.childNodes,C(),d(),s.options.onload.call(s),s)},s.open=function(t){var e,i=t;null==i&&(i=s.value||""),e=s.search(i),e.length<1&&(h(),s.currentItemsDOM=null),s.showList()},s.showList=function(){s.visible=!0,u.addClass(s.list,o.visible),s.repositionList(),u.addClass(s.textInput,o.textInputWithList),s.list.firstChild.className!==o.noResults&&u.addClass(s.list.firstChild,o.activeItem)},s.hideList=function(){s.visible=!1,u.removeClass(s.list,o.visible),u.removeClass(s.textInput,o.textInputWithList)},s.selectItem=function(t){var e,i;e=m(t),s.textInput.value=e,s.hideList(),i=t.getAttribute("data-value")?t.getAttribute("data-value"):t.value,s.target.value=i,s.value=i,s.options.onchange.call(s)},s.repositionList=function(){var i=s.textInput.offsetTop,n=Math.floor(s.textInput.offsetTop+parseInt(s.textInput.offsetHeight,10)),l=t.innerHeight||e.documentElement.clientHeight,o=0;o=n+s.list.offsetHeight>l?i-s.list.offsetHeight:n,s.list.style.top=o+"px",s.list.style.left=s.textInput.offsetLeft+"px",s.options.fitList&&(s.list.style.width=s.textInput.offsetWidth+"px")},s.search=function(t){var e,i="";return""!==t?(t=u.escapeString(t),i=new RegExp("<li[^>]*>[^<]*"+t+"[^<]*</li>","gi")):i=/<li[^<]*<\/li>/gi,e=s.itemsHTML.match(i)||[],e.length&&(e=e.join(""),t&&(e=c(t,e)),g(e),u.addClass(s.list.firstChild,o.activeItem)),e},s.getActiveListItem=function(){return s.list.querySelector("."+o.activeItem)},s.toggleActiveItem=function(){var t=s.list.querySelector("."+o.activeItem);t&&u.removeClass(t,o.activeItem)},s.scrollListItemIntoView=function(t){var e,i,n=t.offsetTop,l=t.offsetHeight,o=s.list.offsetHeight,r=s.list.scrollTop;e=r>=n,i=n>=r+o-l,e?s.list.scrollTop=n:i&&(s.list.scrollTop=n-o+l)}};t.Autocompletr=n,function(){var i=e.querySelectorAll("[data-autocompletr]");[].forEach.call(i,function(e){new t.Autocompletr(e).init()})}()}(window,document);